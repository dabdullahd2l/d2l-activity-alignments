<link rel="import" href="../d2l-fetch-siren-entity-behavior/d2l-fetch-siren-entity-behavior.html">
<script>
	window.D2L = window.D2L || {};
	window.D2L.PolymerBehaviors = window.D2L.PolymerBehaviors || {};
	/* @polymerBehavior window.D2L.PolymerBehaviors.SirenEntityBehavior */
	window.D2L.PolymerBehaviors.SirenEntityBehaviorImpl = {
		properties: {
			href: String,
			token: String,
			entity: Object
		},

		observers: [
			'_fetch("entity", href, token)'
		],

		_fetch: function(propName, href, token) {
			if (typeof propName !== 'string' || !propName || typeof href !== 'string' || !href || typeof token !== 'string') {
				return;
			}
			var self = this;
			this._fetchEntityWithToken(href, function() { return Promise.resolve(token); })
				.then(function(entity) {
					self[propName] = entity;
				});
		}
	};

	/* @polymerBehavior */
	window.D2L.PolymerBehaviors.SirenEntityBehavior = [
		D2L.PolymerBehaviors.FetchSirenEntityBehavior,
		window.D2L.PolymerBehaviors.SirenEntityBehaviorImpl
	];
</script>
